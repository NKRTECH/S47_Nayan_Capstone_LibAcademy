import{r as a,b as q,D as N,j as e,c as x}from"./index-FjlUDy0d.js";const h="http://localhost:3000/api",U=()=>{const[f,g]=a.useState(""),[y,j]=a.useState(""),[m,v]=a.useState(""),[b,S]=a.useState(""),[L,w]=a.useState(null),[d,A]=a.useState(""),[C,E]=a.useState(0),[u,r]=a.useState(!1),[D,p]=a.useState(""),I=q(),{lessonId:l}=N();a.useEffect(()=>{l&&(async()=>{var s,n,i,c;r(!0);try{const o=(await x.get(`${h}/lessons/fetchLessonById/${l}`)).data.lesson;g(o.title),j(o.content.text),v(((s=o.content.media[0])==null?void 0:s.alt)||""),S(((n=o.content.media[0])==null?void 0:n.description)||""),A(o.courseId),E(o.priority),r(!1)}catch($){p(((c=(i=$.response)==null?void 0:i.data)==null?void 0:c.message)||"Error fetching lesson"),r(!1)}})()},[l]);const F=async t=>{var n,i;t.preventDefault(),r(!0);const s=new FormData;s.append("title",f),s.append("text",y),s.append("alt",m),s.append("description",b),s.append("courseId",d),s.append("priority",C),L&&s.append("videoFile",L);try{await x.put(`${h}/lessons/update/${l}`,s,{headers:{"Content-Type":"multipart/form-data"}}),I(`/tutor/courses/${d}/lessons`)}catch(c){p(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Error updating lesson")}finally{r(!1)}},T=async()=>{var t,s;if(window.confirm("Are you sure you want to delete this lesson?")){r(!0);try{await x.delete(`${h}/lessons/delete/${l}`),I(`/tutor/courses/${d}/lessons`)}catch(n){p(((s=(t=n.response)==null?void 0:t.data)==null?void 0:s.message)||"Error deleting lesson")}finally{r(!1)}}};return e.jsxs("div",{children:[e.jsx("h1",{children:"Edit Lesson"}),D&&e.jsx("p",{className:"error",children:D}),e.jsxs("form",{onSubmit:F,children:[e.jsx("input",{type:"text",value:f,onChange:t=>g(t.target.value),placeholder:"Title",required:!0}),e.jsx("br",{}),e.jsx("textarea",{value:y,onChange:t=>j(t.target.value),placeholder:"Lesson text",required:!0}),e.jsx("br",{}),e.jsx("input",{type:"text",value:m,onChange:t=>v(t.target.value),placeholder:"Alt text for video"}),e.jsx("br",{}),e.jsx("textarea",{value:b,onChange:t=>S(t.target.value),placeholder:"Video description"}),e.jsx("br",{}),e.jsx("input",{type:"number",value:C,onChange:t=>E(Number(t.target.value)),placeholder:"Order of lesson"}),e.jsx("br",{}),e.jsx("input",{type:"text",value:d,placeholder:"Course ID",required:!0,readOnly:!0}),e.jsx("br",{}),e.jsx("input",{type:"file",onChange:t=>w(t.target.files[0]),accept:"video/*"}),e.jsx("br",{}),e.jsx("button",{type:"submit",disabled:u,children:u?"Updating...":"Update Lesson"})]}),e.jsx("button",{type:"button",onClick:T,disabled:u,children:u?"Deleting...":"Delete Lesson"})]})};export{U as default};
