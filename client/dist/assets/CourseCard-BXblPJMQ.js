import{a6 as ne,k as re,m as oe,s as se,_ as E,r as j,o as ie,p as q,j as r,q as ae,v as le,g as ce,a as S,T as b,B as N,e as de,b as pe,$ as ue,c as me}from"./index-f7-2eSJk.js";import{u as fe,d as z,T as ge,f as he,r as xe,g as D,M as A}from"./Modal-DyP9q9P1.js";import{C as ye}from"./Card-BKKX2NPm.js";import{C as W,R as Ce}from"./Rating-mU1j8mJx.js";import{G as I}from"./Grid-DV5glLz2.js";var V={exports:{}},be="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ee=be,ve=Ee;function Y(){}function X(){}X.resetWarningCache=Y;var je=function(){function e(t,i,h,l,c,d){if(d!==ve){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}e.isRequired=e;function n(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:X,resetWarningCache:Y};return s.PropTypes=s,s};V.exports=je();var Re=V.exports;const u=ne(Re);function Te(e){return re("MuiCardMedia",e)}oe("MuiCardMedia",["root","media","img"]);const we=["children","className","component","image","src","style"],ke=e=>{const{classes:n,isMediaComponent:s,isImageComponent:t}=e;return le({root:["root",s&&"media",t&&"img"]},Te,n)},Pe=se("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:s}=e,{isMediaComponent:t,isImageComponent:i}=s;return[n.root,t&&n.media,i&&n.img]}})(({ownerState:e})=>E({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),Me=["video","audio","picture","iframe","img"],Se=["picture","img"],_e=j.forwardRef(function(n,s){const t=ie({props:n,name:"MuiCardMedia"}),{children:i,className:h,component:l="div",image:c,src:d,style:a}=t,f=q(t,we),C=Me.indexOf(l)!==-1,x=!C&&c?E({backgroundImage:`url("${c}")`},a):a,v=E({},t,{component:l,isMediaComponent:C,isImageComponent:Se.indexOf(l)!==-1}),T=ke(v);return r.jsx(Pe,E({className:ae(T.root,h),as:l,role:!C&&c?"img":void 0,ref:s,style:x,ownerState:v,src:C?c||d:void 0},f,{children:i}))}),Ie=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function $e(e,n,s){const t=n.getBoundingClientRect(),i=s&&s.getBoundingClientRect(),h=z(n);let l;if(n.fakeTransform)l=n.fakeTransform;else{const a=h.getComputedStyle(n);l=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform")}let c=0,d=0;if(l&&l!=="none"&&typeof l=="string"){const a=l.split("(")[1].split(")")[0].split(",");c=parseInt(a[4],10),d=parseInt(a[5],10)}return e==="left"?i?`translateX(${i.right+c-t.left}px)`:`translateX(${h.innerWidth+c-t.left}px)`:e==="right"?i?`translateX(-${t.right-i.left-c}px)`:`translateX(-${t.left+t.width-c}px)`:e==="up"?i?`translateY(${i.bottom+d-t.top}px)`:`translateY(${h.innerHeight+d-t.top}px)`:i?`translateY(-${t.top-i.top+t.height-d}px)`:`translateY(-${t.top+t.height-d}px)`}function Ne(e){return typeof e=="function"?e():e}function $(e,n,s){const t=Ne(s),i=$e(e,n,t);i&&(n.style.webkitTransform=i,n.style.transform=i)}const Oe=j.forwardRef(function(n,s){const t=fe(),i={enter:t.transitions.easing.easeOut,exit:t.transitions.easing.sharp},h={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:l,appear:c=!0,children:d,container:a,direction:f="down",easing:C=i,in:x,onEnter:v,onEntered:T,onEntering:P,onExit:R,onExited:w,onExiting:O,style:k,timeout:M=h,TransitionComponent:F=ge}=n,B=q(n,Ie),g=j.useRef(null),m=ce(d.ref,g,s),y=o=>p=>{o&&(p===void 0?o(g.current):o(g.current,p))},_=y((o,p)=>{$(f,o,a),xe(o),v&&v(o,p)}),J=y((o,p)=>{const U=D({timeout:M,style:k,easing:C},{mode:"enter"});o.style.webkitTransition=t.transitions.create("-webkit-transform",E({},U)),o.style.transition=t.transitions.create("transform",E({},U)),o.style.webkitTransform="none",o.style.transform="none",P&&P(o,p)}),K=y(T),Q=y(O),Z=y(o=>{const p=D({timeout:M,style:k,easing:C},{mode:"exit"});o.style.webkitTransition=t.transitions.create("-webkit-transform",p),o.style.transition=t.transitions.create("transform",p),$(f,o,a),R&&R(o)}),ee=y(o=>{o.style.webkitTransition="",o.style.transition="",w&&w(o)}),te=o=>{l&&l(g.current,o)},L=j.useCallback(()=>{g.current&&$(f,g.current,a)},[f,a]);return j.useEffect(()=>{if(x||f==="down"||f==="right")return;const o=he(()=>{g.current&&$(f,g.current,a)}),p=z(g.current);return p.addEventListener("resize",o),()=>{o.clear(),p.removeEventListener("resize",o)}},[f,x,a]),j.useEffect(()=>{x||L()},[x,L]),r.jsx(F,E({nodeRef:g,onEnter:_,onEntered:K,onEntering:J,onExit:Z,onExited:ee,onExiting:Q,addEndListener:te,appear:c,in:x,timeout:M},B,{children:(o,p)=>j.cloneElement(d,E({ref:m,style:E({visibility:o==="exited"&&!x?"hidden":void 0},k,d.props.style)},p))}))}),G=({description:e,onClose:n})=>{const s=t=>{t.stopPropagation()};return r.jsx(A,{open:!0,onClose:n,"aria-labelledby":"modal-title","aria-describedby":"modal-description",onClick:s,sx:{display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)",fontFamily:"Roboto, sans-serif"},children:r.jsx(Oe,{direction:"up",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:r.jsxs(S,{sx:{width:400,background:"linear-gradient(135deg, #FEB692 0%, #EA5455 100%)",color:"white",boxShadow:24,p:4,borderRadius:8,textAlign:"center"},children:[r.jsx(b,{variant:"h6",id:"modal-title",gutterBottom:!0,children:"Course Description"}),r.jsx(b,{variant:"body1",id:"modal-description",gutterBottom:!0,children:e}),r.jsx(S,{sx:{display:"flex",justifyContent:"center",mt:2},children:r.jsx(N,{variant:"contained",onClick:n,children:"Close"})})]})})})};G.propTypes={description:u.string.isRequired,onClose:u.func.isRequired};const H=({course:e})=>{const{title:n,description:s,tutorId:t,fileUrl:i,price:h,enrollmentCount:l,lessonIds:c,averageRating:d}=e,{enrolledCourses:a}=de(m=>m.learner),f="https://s47-nayan-capstone-libacademy-7yf9.onrender.com/api",C="https://s47-nayan-capstone-libacademy-7yf9.onrender.com/",[x,v]=j.useState(!1),T=pe(),P=localStorage.getItem("token"),R=P?ue(P):"",w=R==null?void 0:R.role,O=m=>{m.stopPropagation(),v(!0)},k=m=>{m.stopPropagation(),v(!1)},M=async m=>{m.preventDefault(),m.stopPropagation();try{const _=(await me.post(`${f}/payments/create-order`,{amount:Number(h*100),learnerId:R.learnerId,courseId:e._id,currency:"INR",paymentMethod:"phonepe",status:"pending"})).data.paymentPageUrl;_&&(window.location.href=_)}catch(y){console.error("Error creating order:",y),alert("Failed to create order. Please try again.")}},F=m=>{m.stopPropagation(),w==="learner"?T(`/learner/courses/${e._id}`,{state:{course:e}}):w==="tutor"&&T(`${e._id}/lessons`)},B=()=>a.some(y=>y._id===e._id)?r.jsx(N,{variant:"contained",color:"success",children:"Enrolled"}):r.jsx(N,{variant:"contained",color:"primary",onClick:M,children:"Enroll Now"}),g=s.length>100?`${s.substring(0,100)}...`:s;return r.jsxs(ye,{sx:{width:300,height:"100%",display:"flex",flexDirection:"column"},onClick:F,children:[i&&r.jsx(_e,{component:"img",alt:n,height:"140",image:`${C}${i}`,sx:{filter:"brightness(0.7)",objectFit:"cover"}}),r.jsxs(W,{sx:{flexGrow:1,display:"flex",flexDirection:"column",background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",color:"#333333"},children:[r.jsx(b,{gutterBottom:!0,variant:"h5",component:"div",sx:{fontWeight:"bold",color:"inherit"},children:n}),r.jsxs(b,{variant:"body2",color:"text.secondary",sx:{flex:1,color:"inherit"},children:[g,s.length>100&&r.jsx(N,{size:"small",onClick:O,sx:{color:"#007bff",textTransform:"none",marginLeft:"5px",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}},children:"Read More"})]}),r.jsxs(b,{variant:"body2",color:"text.secondary",sx:{color:"inherit"},children:["Instructor: ",`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`]}),r.jsx(S,{mt:2,children:r.jsxs(I,{container:!0,spacing:2,children:[r.jsx(I,{item:!0,children:r.jsxs(b,{variant:"body2",sx:{color:"inherit"},children:["Lessons: ",c.length]})}),r.jsx(I,{item:!0,children:r.jsxs(b,{variant:"body2",sx:{color:"inherit"},children:["Enrolled: ",l]})}),r.jsx(I,{item:!0,children:r.jsx(Ce,{value:d||0,readOnly:!0})})]})})]}),w==="learner"&&r.jsx(W,{sx:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",color:"white"},children:r.jsxs(S,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(S,{children:[r.jsxs(b,{variant:"h6",color:"text.primary",children:["Price: $",h]}),r.jsxs(b,{variant:"body2",color:"text.secondary",children:[l," enrolled"]})]}),B()]})}),x&&r.jsx(A,{open:x,onClose:k,"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:r.jsx(G,{description:s,onClose:k})})]})};H.propTypes={course:u.shape({title:u.string.isRequired,description:u.string.isRequired,fileUrl:u.string,tutorId:u.shape({firstName:u.string,lastName:u.string}),price:u.number.isRequired,enrollmentCount:u.number.isRequired,lessonIds:u.arrayOf(u.object),averageRating:u.number}).isRequired};const We=H;export{We as C};
