import{j as t,b as w,Z as j,T as l,a as v,P as R,R as $,e as I,H as E,r as d,c as P}from"./index-f7-2eSJk.js";import{s}from"./styled-Cry4a1KF.js";import{C as B}from"./Card-BKKX2NPm.js";import{c as F}from"./Modal-DyP9q9P1.js";import{C as M}from"./Rating-mU1j8mJx.js";import{C as _}from"./CourseReviews-BEgyhaSJ.js";import{C as H}from"./CircularProgress-C6SH9T4R.js";import"./Container-CUuuXKaa.js";import"./IconButton-5JQqtBZk.js";import"./TextField-B4aAAyhF.js";import"./useFormControl-N2H_Ek8d.js";const N=F(t.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),T=s(B)(({theme:o})=>({cursor:"pointer",position:"relative",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",transition:"background 0.5s","&:hover":{background:"linear-gradient(135deg, #fd746c 0%, #ff9068 100%)","&::before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",animation:"$etherealEffect 2s linear infinite",zIndex:-1}},"@keyframes etherealEffect":{"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"100% 0"}}})),z=s(N)(({theme:o})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"$drop 0.8s ease-in-out infinite","@keyframes drop":{"0%, 100%":{transform:"translate(-50%, -50%)"},"50%":{transform:"translate(-50%, 10%)"}}})),A=({lesson:o,isEnrolled:r})=>{const f=w(),e=j(),c=()=>{r?f(`${e.pathname}/lessons/${o._id}`):(alert("You need to enroll in this course to access the lesson."),console.log("Not enrolled"))};return t.jsx(T,{onClick:c,children:t.jsxs(M,{children:[t.jsx(l,{variant:"h5",sx:{fontWeight:"bold"},children:o.title}),t.jsxs(l,{variant:"body1",gutterBottom:!0,children:["Overview: ",o.content.text]}),!r&&t.jsx(z,{})," "]})})},D="https://s47-nayan-capstone-libacademy-7yf9.onrender.com/api",V=s(v)(({theme:o})=>({padding:o.spacing(4),background:"linear-gradient(to bottom, #0c1445, #0d1142)",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#ffffff",fontFamily:"'Roboto', sans-serif"})),W=s(R)(({theme:o})=>({padding:o.spacing(4),backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"15px",boxShadow:o.shadows[5],maxWidth:"900px",width:"100%",marginBottom:o.spacing(2),position:"relative",overflow:"hidden"})),O=$.memo(s("div")(({theme:o})=>({position:"absolute",borderRadius:"50%",background:"rgba(255, 255, 255, 0.5)",width:"2px",height:"2px",animation:"$twinkle 1s infinite",zIndex:1}))),U=s(l)(({theme:o})=>({color:"#ffffff",marginBottom:o.spacing(2),textShadow:"2px 2px 4px rgba(0,0,0,0.3)",fontFamily:"'Roboto Slab', serif"})),Y=s(l)(({theme:o})=>({color:"#ffffff",marginBottom:o.spacing(3),textShadow:"1px 1px 3px rgba(0,0,0,0.2)",fontFamily:"'Roboto Slab', serif"})),Z=s(l)(({theme:o})=>({color:"#ff1744",backgroundColor:"#f8bbd0",padding:o.spacing(1),borderRadius:o.shape.borderRadius,boxShadow:o.shadows[1],fontFamily:"'Roboto', sans-serif"})),q=s(H)(({theme:o})=>({color:"#ffffff",display:"block",margin:`${o.spacing(4)} auto`})),G=s(v)(({theme:o})=>({marginTop:o.spacing(4),display:"grid",gap:o.spacing(2)})),io=()=>{var h,u,x;const o=I(i=>{var a;return(a=i.learner.learnerData)==null?void 0:a._id}),{courseId:r}=E(),e=(h=j().state)==null?void 0:h.course,[c,C]=d.useState([]),[p,g]=d.useState(null),[S,m]=d.useState(!1),[k,L]=d.useState(!0);return d.useEffect(()=>{(async()=>{var a,b,y;try{const n=await P.post(`${D}/lessons/fetchLessonsByCourseId/${r}`,{learnerId:o});console.log("Lessons fetched successfully by courseId:",n.data),C(n.data.lessons),m(n.data.isEnrolled),g(null)}catch(n){console.error("Error fetching lessons:",((a=n.response)==null?void 0:a.data)||n.message),g(((y=(b=n.response)==null?void 0:b.data)==null?void 0:y.message)||"An error occurred while fetching lessons."),m(!1)}finally{L(!1)}})()},[r,o]),t.jsxs(t.Fragment,{children:[t.jsx(V,{children:t.jsxs(W,{elevation:0,children:[[...Array(200)].map((i,a)=>t.jsx(O,{style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`}},a)),t.jsxs(U,{variant:"h2",children:["Lessons for ",e==null?void 0:e.title]}),t.jsxs(Y,{variant:"h5",children:["Instructor:"," ",`${(u=e==null?void 0:e.tutorId)==null?void 0:u.firstName} ${(x=e==null?void 0:e.tutorId)==null?void 0:x.lastName}`]}),k?t.jsx(q,{}):p?t.jsx(Z,{variant:"body1",children:p}):t.jsx(G,{children:c==null?void 0:c.map(i=>t.jsx(A,{lesson:i,isEnrolled:S},i._id))})]})}),t.jsx(_,{courseId:r})]})};export{io as default};
