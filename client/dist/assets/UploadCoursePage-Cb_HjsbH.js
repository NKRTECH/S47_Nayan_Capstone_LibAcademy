import{u as b,b as D,e as p,r as l,j as e,A as N,C as F}from"./index-5YDDZEYf.js";const _=()=>{const h=b(),c=D(),m=p(t=>t.tutor.tutorData._id),d=p(t=>t.courses.isUploaded);console.log(d);const[a,n]=l.useState({category:[],title:"",description:"",tutorId:m,file:null,price:"",duration:"",startDate:""}),[g,x]=l.useState([]),f=async()=>{try{const t=await N();console.log("Categories: ",t),x(t)}catch(t){console.error("Error fetching categories:",t)}};l.useEffect(()=>{f()},[]);const o=t=>{n({...a,[t.target.name]:t.target.value})},j=t=>{const{name:s,checked:r,value:u}=t.target;n(r?i=>({...i,category:[...i.category,u]}):i=>({...i,category:i.category.filter(y=>y!==u)}))},C=t=>{n({...a,file:t.target.files[0]})},v=async t=>{t.preventDefault();const s=new FormData;s.append("category",a.category),s.append("title",a.title),s.append("description",a.description),s.append("tutorId",a.tutorId),s.append("file",a.file),s.append("price",a.price),s.append("duration",a.duration),s.append("startDate",a.startDate),h(F(s)).then(r=>{console.log("action:--",r),r.type==="courses/create/fulfilled"&&(console.log("Course created successfully:--",r.payload),c("/tutor/courses"))}).catch(r=>{console.error("Error creating course:",r)})};return l.useEffect(()=>{d&&c("/tutor/courses")},[d,c]),e.jsxs("div",{className:"upload-course-container",children:[e.jsx("h2",{children:"Upload New Course"}),e.jsxs("form",{onSubmit:v,className:"upload-course-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Title:"}),e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:o})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description:"}),e.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:o})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categories:"}),g.map(t=>e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:t._id,name:"category",value:t._id,checked:a.category.includes(t._id),onChange:j}),e.jsx("label",{htmlFor:t._id,children:t.name})]},t._id))]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"file",children:"File:"}),e.jsx("input",{type:"file",id:"file",onChange:C})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price:"}),e.jsx("input",{type:"number",id:"price",name:"price",value:a.price,onChange:o})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"duration",children:"Duration:"}),e.jsx("input",{type:"text",id:"duration",name:"duration",value:a.duration,onChange:o})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"startDate",children:"Start Date:"}),e.jsx("input",{type:"date",id:"startDate",name:"startDate",value:a.startDate,onChange:o})]}),e.jsx("button",{type:"submit",className:"submit-btn",children:"Upload Course"})]})]})};export{_ as default};
