import{P as S,e as j,B as b,b as v,a as C,r as c,j as t,d as k,a1 as E,f as G}from"./index-CVHsgGyL.js";import{G as T,a as A,S as B}from"./index.esm--ddRR-Sx.js";import{s as i}from"./styled-CpWpjGkL.js";import{C as F}from"./Container-CksAh_Oz.js";import{T as g}from"./TextField-C-8Xz9mF.js";import{A as I}from"./Alert-6Ca_5wWL.js";import"./mergeSlotProps-CCCx748f.js";import"./Modal-D9nivw5Y.js";import"./useFormControl-D_L_ZpmW.js";import"./createSvgIcon-CRBgYmHc.js";const L="https://s47-nayan-capstone-libacademy.onrender.com/api",P="963011057711-md4pthsv1vv72dport7bp2pgg11rlj8t.apps.googleusercontent.com",D=i(S)(({theme:e})=>({padding:e.spacing(4),marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:e.palette.background.default,boxShadow:e.shadows[5]})),O=i("form")(({theme:e})=>({width:"100%",marginTop:e.spacing(1)})),W=i(j)(({theme:e})=>({margin:e.spacing(3,0,2),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",color:e.palette.common.white})),V=i(b)(({theme:e})=>({marginTop:e.spacing(2),width:"100%",display:"flex",justifyContent:"center"})),K=()=>{const e=v(),d=C(),[l,p]=c.useState({email:"",password:""}),[m,a]=c.useState(!1),[h,s]=c.useState(""),u=r=>{const{name:n,value:o}=r.target;p(w=>({...w,[n]:o}))},f=r=>{r.preventDefault();const n=r.target;if(n.checkValidity()===!1){n.reportValidity();return}e(E(l)).then(o=>{o.type==="tutor/login/fulfilled"?(d("/tutor/"),window.location.reload()):o.type==="tutor/login/rejected"&&(s(o.payload),a(!0))}).catch(o=>{console.error("Error logging in:",o),s("An error occurred while logging in."),a(!0)})},x=async r=>{const{credential:n}=r;try{const o=await G.post(`${L}/tutors/login/google`,{credential:n});localStorage.setItem("token",o.data.token),localStorage.setItem("tutorData",JSON.stringify(o.data.tutor)),d("/tutor/"),window.location.reload()}catch(o){console.error("Error logging in with Google OAuth:",o),s(o.response.data.message),a(!0)}},y=r=>{console.error("Google Sign-In error:",r),s("An error occurred during Google Sign-In."),a(!0)};return t.jsxs(F,{component:"main",maxWidth:"xs",children:[t.jsxs(D,{children:[t.jsx(k,{component:"h1",variant:"h5",children:"Tutor Login"}),t.jsxs(O,{onSubmit:f,noValidate:!0,children:[t.jsx(g,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",autoFocus:!0,value:l.email,onChange:u}),t.jsx(g,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l.password,onChange:u}),t.jsx(W,{type:"submit",fullWidth:!0,variant:"contained",children:"Login"})]}),t.jsx(V,{children:t.jsx(T,{clientId:P,children:t.jsx(A,{onSuccess:x,onFailure:y,scope:"profile email"})})})]}),t.jsx(B,{open:m,autoHideDuration:6e3,onClose:()=>a(!1),children:t.jsx(I,{onClose:()=>a(!1),severity:"error",sx:{width:"100%"},children:h})})]})};export{K as default};
