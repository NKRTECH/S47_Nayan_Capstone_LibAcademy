import{r as s,a as T,i as N,u as O,j as t,f as k}from"./index-CVHsgGyL.js";const P=()=>{const[u,m]=s.useState(""),[l,y]=s.useState(""),[i,b]=s.useState(""),[c,C]=s.useState(""),[r,d]=s.useState(""),[p,S]=s.useState(0),[I,D]=s.useState(null),[x,g]=s.useState(!1),[h,v]=s.useState(null),L=T(),{courseId:o}=N(),q=O(e=>e.tutor.tutorData._id);s.useEffect(()=>{o&&d(o)},[o]);const A=async e=>{var f,j;e.preventDefault(),g(!0),v(null);const E={text:l,media:[{type:"video",alt:i,description:c}]},a=new FormData;a.append("title",u),a.append("content",JSON.stringify(E)),a.append("courseId",r),a.append("videoFile",I),a.append("tutorId",q),a.append("priority",p);try{const n=localStorage.getItem("token"),F=await k.post("http://localhost:3000/api/lessons/create",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}});console.log("Lesson created successfully: ",F.data),L(`/tutor/courses/${r}/lessons`)}catch(n){v(((j=(f=n.response)==null?void 0:f.data)==null?void 0:j.message)||"An error occurred")}finally{g(!1)}};return t.jsxs("form",{onSubmit:A,children:[t.jsx("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Title",required:!0}),t.jsx("br",{}),t.jsx("textarea",{value:l,onChange:e=>y(e.target.value),placeholder:"Lesson text",required:!0}),t.jsx("br",{}),t.jsx("input",{type:"text",value:i,onChange:e=>b(e.target.value),placeholder:"Alt text for video"}),t.jsx("br",{}),t.jsx("textarea",{value:c,onChange:e=>C(e.target.value),placeholder:"Video description"}),t.jsx("br",{}),t.jsx("input",{type:"text",value:r,onChange:e=>d(e.target.value),placeholder:"Course ID",required:!0,readOnly:!0}),t.jsx("br",{}),t.jsx("input",{type:"number",value:p,onChange:e=>S(Number(e.target.value)),placeholder:"Order of lesson"}),t.jsx("br",{}),t.jsx("input",{type:"file",onChange:e=>D(e.target.files[0]),accept:"video/*",required:!0}),t.jsx("br",{}),t.jsx("button",{type:"submit",disabled:x,children:x?"Creating...":"Create Lesson"}),h&&t.jsx("p",{children:h.message})]})};export{P as default};
